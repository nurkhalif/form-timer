<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Page</title>
</head>
<body>
  <h2 id="quizName"></h2>
  <div id="timer"></div>
  <iframe id="quizFrame" width="100%" height="600"></iframe>

<script>
async function loadSettings() {
  const repo = "nurkhalif/form-timer";
  const filePath = "settings.json";

  const res = await fetch(`https://raw.githubusercontent.com/${repo}/main/${filePath}`);
  const settings = await res.json();

  // Apply settings
  document.getElementById("quizName").innerText = settings.name;
  document.getElementById("quizFrame").src = settings.form;

  // Start countdown
  let time = settings.minutes * 60;
  const timerEl = document.getElementById("timer");
  const countdown = setInterval(() => {
    const mins = Math.floor(time / 60);
    const secs = time % 60;
    timerEl.innerText = `${mins}:${secs < 10 ? "0" : ""}${secs}`;
    time--;

    if (time < 0) {
      clearInterval(countdown);
      timerEl.innerText = "â° Time's up!";
      document.getElementById("quizFrame").style.display = "none";
    }
  }, 1000);
}

loadSettings();
</script>
</body>
</html>
